(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,a){"use strict";a.r(e);var n=a(2),o=a(3),r=a(5),s=a(4),l=a(6),i=a(1),c=a(0),u=a.n(c),m=a(8),p=a.n(m),h=(a(16),"https://api.iextrading.com/1.0"),d=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(s.a)(e).call(this,t))).update_unit_price=function(){var t=h+"/stock/"+a.props.symbol+"/price";fetch(t).then(function(t){return t.json()}).then(function(t){var e=parseFloat(t).toFixed(3);this.setState({unit_price:e})}.bind(Object(i.a)(Object(i.a)(a))))},a.state={unit_price:0,showEUR:!1},a}return Object(l.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.update_unit_price(),this.interval=setInterval(function(){return t.update_unit_price()},2e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(t){this.props.showinEur!==t.showinEur&&this.setState({showEUR:this.props.showinEur})}},{key:"render",value:function(){var t=this;return!0===this.state.showEUR?u.a.createElement("tr",null,u.a.createElement("td",null,this.props.symbol),u.a.createElement("td",null,parseFloat(this.state.unit_price*this.props.usdEurexchange).toFixed(3)," \u20ac"),u.a.createElement("td",null,this.props.shares),u.a.createElement("td",null,parseFloat(this.state.unit_price*this.props.shares*this.props.usdEurexchange).toFixed(3)," \u20ac"),u.a.createElement("td",null,u.a.createElement("button",{type:"button",className:"btn btn-warning btn-sm",onClick:function(){return t.props.deleteStock(t.props.index)}},"Delete"))):u.a.createElement("tr",null,u.a.createElement("td",null,this.props.symbol),u.a.createElement("td",null,this.state.unit_price," $"),u.a.createElement("td",null,this.props.shares),u.a.createElement("td",null,parseFloat(this.state.unit_price*this.props.shares).toFixed(3)," $"),u.a.createElement("td",null,u.a.createElement("button",{type:"button",className:"btn btn-warning btn-sm",onClick:function(){return t.props.deleteStock(t.props.index)}},"Delete")))}}]),e}(u.a.Component),f=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(s.a)(e).call(this,t))).remove_stock=function(t){var e=a.state.stocks,n=a.state.stocks[t].unit_price*a.state.stocks[t].shares;e.splice(t,1);var o=a.state.current_stocks-1,r=a.state.total_value-n;r=parseFloat(r).toFixed(3),a.setState({stocks:e,current_stocks:o,total_value:r})},a.remove_all_stock=function(){a.setState({stocks:[],current_stocks:0,total_value:0})},a.show_in_eur=function(){a.setState({inEUR:!0})},a.show_in_usd=function(){a.setState({inEUR:!1})},a.each_stock=function(t,e){return u.a.createElement(d,{symbol:t.symbol,shares:t.shares,key:e,index:e,showinEur:a.state.inEUR,usdEurexchange:a.state.usdEur,deleteStock:function(t){return a.remove_stock(t)}})},a.state={addingStock:!1,stocks:[],current_stocks:0,total_value:0,loaded:0,inEUR:!1,usdEur:0},a}return Object(l.a)(e,t),Object(o.a)(e,[{key:"savePortfolioState",value:function(){localStorage.setItem(this.props.name,JSON.stringify(this.state))}},{key:"componentWillMount",value:function(){this.setState(JSON.parse(localStorage.getItem(this.props.name)))}},{key:"componentDidMount",value:function(){var t=this;this.setState(JSON.parse(localStorage.getItem(this.props.name))),window.addEventListener("beforeunload",this.savePortfolioState.bind(this)),fetch("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=EUR&apikey=YIY9YZU6E4JU7NUM").then(function(t){return t.json()}).then(function(t){var e=parseFloat(t["Realtime Currency Exchange Rate"]["5. Exchange Rate"]).toFixed(3);this.setState({usdEur:e})}.bind(this)).catch(function(t){alert("Exchange not found")}),this.update_total(),this.interval=setInterval(function(){return t.update_total()},2e4)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.savePortfolioState.bind(this)),this.savePortfolioState(),clearInterval(this.interval)}},{key:"update_total",value:function(){var t=this,e=0;if(0===this.state.current_stocks)this.setState({total_value:0});else for(var a=function(a){var n=t.state.stocks[a],o=h+"/stock/"+n.symbol+"/price";fetch(o).then(function(t){return t.json()}).then(function(t){var a=parseFloat(t).toFixed(3);e+=a*n.shares,this.setState({total_value:e})}.bind(t))},n=0;n<this.state.current_stocks;n++)a(n)}},{key:"add_stock_state",value:function(){this.setState({addingStock:!0})}},{key:"save_stock",value:function(){var t=this;if(this.state.current_stocks<50||"undefined"!==typeof this.state.stocks.find(function(e){return e.symbol===t.refs.symbol.value})){var e=this.refs.symbol.value,a=parseInt(this.refs.number_shares.value),n=this.state.total_value,o=this.state.current_stocks,r=this.state.stocks;fetch(h+"/stock/"+e+"/price").then(function(t){return t.json()}).then(function(t){"undefined"===typeof r.find(function(t){return t.symbol===e})&&(o+=1);var s=parseFloat(t).toFixed(3);n+=s*a,n=parseFloat(n).toFixed(3),r.push({symbol:e,shares:a,unit_price:s}),this.setState({addingStock:!1,stocks:r,current_stocks:o,total_value:n})}.bind(this)).catch(function(t){alert("Symbol not found"+t)})}else alert("You have too much stocks in this portfolio")}},{key:"back_to_portfolio",value:function(){this.setState({addingStock:!1})}},{key:"render_stock_form",value:function(){var t=this;return u.a.createElement("div",{className:"mt-2 col-lg-6 col-sm-12 p-1"},u.a.createElement("div",{className:"card "},u.a.createElement("h3",{className:"card-header"},this.props.name),u.a.createElement("div",{className:"form-group"},u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"symbol"},"Symbol"),u.a.createElement("input",{type:"text",id:"symbol",ref:"symbol",className:"form-control"})),u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"number_shares"},"Total number of shares"),u.a.createElement("input",{type:"number",id:"number_shares",ref:"number_shares",className:"form-control"})),u.a.createElement("div",{className:"btn-toolbar m-2",role:"toolbar"},u.a.createElement("div",{className:"btn-group mr-3",role:"group"},u.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return t.save_stock()}},"Save")),u.a.createElement("div",{className:"btn-group",role:"group"},u.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn",onClick:function(){return t.back_to_portfolio()}},"Cancel"))))))}},{key:"render_portfolio",value:function(){var t=this,e="";return e=!0===this.state.inEUR?parseFloat(this.state.usdEur*this.state.total_value).toFixed(3)+"\u20ac":parseFloat(this.state.total_value).toFixed(3)+"$",u.a.createElement("div",{className:"mt-2 col-lg-6 col-sm-12 p-1"},u.a.createElement("div",{className:"card "},u.a.createElement("h3",{className:"card-header"},this.props.name),u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"btn-group btn-group-toggle m-1","data-toggle":"buttons"},u.a.createElement("button",{className:"btn btn-secondary float-right",type:"radio",onClick:function(){return t.show_in_usd()}}," Show in $"),u.a.createElement("button",{className:"btn btn-secondary float-right",type:"radio",onClick:function(){return t.show_in_eur()}}," Show in \u20ac"))),u.a.createElement("div",null,u.a.createElement("table",{className:"table table-striped table-hover"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Name"),u.a.createElement("th",{scope:"col"},"Unit. Value"),u.a.createElement("th",{scope:"col"},"Quantity"),u.a.createElement("th",{scope:"col"},"Total Value"),u.a.createElement("th",{scope:"col"},"Delete"))),u.a.createElement("tbody",null,this.state.stocks.map(this.each_stock)))),u.a.createElement("div",null,"Total value : ",e),u.a.createElement("div",{className:"btn-toolbar m-2",role:"toolbar"},u.a.createElement("div",{className:"btn-group m-1",role:"group","aria-label":"First group"},u.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return t.add_stock_state()}},"Add Stock")),u.a.createElement("div",{className:"btn-group m-1",role:"group"},u.a.createElement("button",{type:"button",className:"btn btn-info",onClick:function(){return t.update_total()}},"Refresh total")),u.a.createElement("div",{className:"btn-group m-1",role:"group"},u.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return t.props.remove(t.props.index)}},"Remove portfolio")),u.a.createElement("div",{className:"btn-group m-1",role:"group"},u.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return t.remove_all_stock()}},"Remove all stocks")))))}},{key:"render",value:function(){return this.state.addingStock?this.render_stock_form():this.render_portfolio()}}]),e}(u.a.Component),b=function(t){function e(t){var a;Object(n.a)(this,e),(a=Object(r.a)(this,Object(s.a)(e).call(this,t))).addPortfolio=function(){if(a.state.current_number_of_portfolio<10&&!1===a.state.portfolios.includes(document.getElementById("pf_name").value)){var t=document.getElementById("pf_name").value,e=a.state.portfolios;e.push(t);var n=a.state.current_number_of_portfolio+1;a.setState({portfolios:e,current_number_of_portfolio:n})}else!0===a.state.portfolios.includes(document.getElementById("pf_name").value)?alert("This name is already used"):alert("You have too much portfolios")},a.removePortfolio=function(t){var e=a.state.portfolios;localStorage.removeItem(e[t]),e.splice(t,1);var n=a.state.current_number_of_portfolio-1;a.setState({portfolios:e,current_number_of_portfolio:n})},a.eachPortfolios=function(t,e){return u.a.createElement(f,{name:t,key:e,index:e,remove:function(t){return a.removePortfolio(t)}})};return a.state={portfolios:[],current_number_of_portfolio:0},a}return Object(l.a)(e,t),Object(o.a)(e,[{key:"saveMainState",value:function(){localStorage.setItem("portfolios_history",JSON.stringify(this.state))}},{key:"componentDidMount",value:function(){this.setState(JSON.parse(localStorage.getItem("portfolios_history"))),window.addEventListener("beforeunload",this.saveMainState.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveMainState.bind(this)),this.saveMainState()}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{className:"container-fluid"},u.a.createElement("div",{className:"row m-2"},u.a.createElement("input",{id:"pf_name",type:"text"}),u.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return t.addPortfolio()}},"Create new portfolio")),u.a.createElement("div",{className:"row"},this.state.portfolios.map(this.eachPortfolios)))}}]),e}(u.a.Component);p.a.render(u.a.createElement(b,null),document.getElementById("root"))},16:function(t,e,a){},9:function(t,e,a){t.exports=a(10)}},[[9,2,1]]]);
//# sourceMappingURL=main.1d76c10e.chunk.js.map